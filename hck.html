<!DOCTYPE HTML><html lang=en class="sidebar-visible no-js light"><head><meta charset=UTF-8><title>hck - Command line text processing with Rust tools</title><meta content="text/html; charset=utf-8"http-equiv=Content-Type><meta name=description content="Command line text processing with Rust tools"><meta name=viewport content="width=device-width, initial-scale=1"><meta name=theme-color content=#ffffff><link rel=icon href=favicon.svg><link rel="shortcut icon"href=favicon.png><link rel=stylesheet href=css/variables.css><link rel=stylesheet href=css/general.css><link rel=stylesheet href=css/chrome.css><link rel=stylesheet href=FontAwesome/css/font-awesome.css><link rel=stylesheet href=fonts/fonts.css><link rel=stylesheet href=highlight.css><link rel=stylesheet href=tomorrow-night.css><link rel=stylesheet href=ayu-highlight.css><link rel=stylesheet href=style.css><body><script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script><script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script><script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script><script>
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script><nav id=sidebar class=sidebar aria-label="Table of contents"><div class=sidebar-scrollbox><ol class=chapter><li class="chapter-item expanded affix"><a href=preface.html>Preface</a><li class="chapter-item expanded"><a href=rust-regex.html><strong aria-hidden=true>1.</strong> Rust Regex</a><li class="chapter-item expanded"><a href=hck.html class=active><strong aria-hidden=true>2.</strong> hck</a><li class="chapter-item expanded"><a href=sd.html><strong aria-hidden=true>3.</strong> sd</a><li class="chapter-item expanded"><a href=ripgrep/ripgrep.html><strong aria-hidden=true>4.</strong> ripgrep</a><li><ol class=section><li class="chapter-item expanded"><a href=ripgrep/options.html><strong aria-hidden=true>4.1.</strong> Options</a><li class="chapter-item expanded"><a href=ripgrep/pcre2.html><strong aria-hidden=true>4.2.</strong> PCRE2</a><li class="chapter-item expanded"><a href=ripgrep/multiple-files.html><strong aria-hidden=true>4.3.</strong> Multiple Files</a></ol><li class="chapter-item expanded"><a href=frawk/frawk.html><strong aria-hidden=true>5.</strong> frawk</a><li class="chapter-item expanded"><a href=huniq.html><strong aria-hidden=true>6.</strong> huniq</a><li class="chapter-item expanded"><a href=zet.html><strong aria-hidden=true>7.</strong> zet</a></li><br><hr><li class="chapter-item expanded"><i id=git-repository-button class="fa fa-github"></i><a href=https://github.com/learnbyexample/cli_text_processing_rust>   Source code</a><li class="chapter-item expanded"><i id=home-button class="fa fa-home"></i><a href=https://learnbyexample.github.io/>   My Blog</a><li class="chapter-item expanded"><i id=book-button class="fa fa-book"></i><a href=https://learnbyexample.github.io/books/>   My Books</a><li class="chapter-item expanded"><i id=mail-button class="fa fa-envelope"></i><a href=https://learnbyexample.gumroad.com/l/learnbyexample-weekly>   learnbyexample weekly</a></ol></div><div id=sidebar-resize-handle class=sidebar-resize-handle></div></nav><div id=page-wrapper class=page-wrapper><div class=page><div id=menu-bar-hover-placeholder></div><div id=menu-bar class="menu-bar sticky bordered"><div class=left-buttons><button id=sidebar-toggle class=icon-button type=button title="Toggle Table of Contents"aria-label="Toggle Table of Contents"aria-controls=sidebar><i class="fa fa-bars"></i></button><button id=theme-toggle class=icon-button type=button title="Change theme"aria-label="Change theme"aria-haspopup=true aria-expanded=false aria-controls=theme-list><i class="fa fa-paint-brush"></i></button><ul id=theme-list class=theme-popup aria-label=Themes role=menu><li role=none><button role=menuitem class=theme id=light>Light (default)</button><li role=none><button role=menuitem class=theme id=rust>Rust</button><li role=none><button role=menuitem class=theme id=coal>Coal</button><li role=none><button role=menuitem class=theme id=navy>Navy</button><li role=none><button role=menuitem class=theme id=ayu>Ayu</button></ul><button id=search-toggle class=icon-button type=button title="Search. (Shortkey: s)"aria-label="Toggle Searchbar"aria-expanded=false aria-keyshortcuts=S aria-controls=searchbar><i class="fa fa-search"></i></button></div><h1 class=menu-title>Command line text processing with Rust tools</h1><div class=right-buttons><a href=https://learnbyexample.github.io title=Blog aria-label=Blog> <i id=home-button class="fa fa-home"></i> </a><a href=https://github.com/learnbyexample/cli_text_processing_rust title="Git repository"aria-label="Git repository"> <i id=git-repository-button class="fa fa-github"></i> </a></div></div><div id=search-wrapper class=hidden><form id=searchbar-outer class=searchbar-outer><input type=search id=searchbar name=searchbar placeholder="Search this book ..."aria-controls=searchresults-outer aria-describedby=searchresults-header></form><div id=searchresults-outer class="searchresults-outer hidden"><div id=searchresults-header class=searchresults-header></div><ul id=searchresults></ul></div></div><script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script><div id=content class=content><main><div class=sidetoc><nav class=pagetoc></nav></div><p><br><br><p><img src=./images/warning.svg alt=warning> <img src=./images/warning.svg alt=warning> <img src=./images/warning.svg alt=warning> This is a <strong>work-in-progress</strong> draft version.<p><br><br><h1 id=hck><a class=header href=#hck>hck</a></h1><p>From <a href=https://github.com/sstadick/hck>github: hck</a>:<blockquote><p><em><code>hck</code> is a shortening of <code>hack</code>, a rougher form of <code>cut</code>.</em><p>A close to drop in replacement for <code>cut</code> that can use a regex delimiter instead of a fixed string.<p>No single feature of <code>hck</code> on its own makes it stand out over <code>awk</code>, <code>cut</code>, <code>xsv</code> or other such tools. Where <code>hck</code> excels is making common things easy, such as reordering output fields, or splitting records on a weird delimiter. It is meant to be simple and easy to use while exploring datasets.</blockquote><h2 id=installation><a class=header href=#installation>Installation</a></h2><p>See <a href=https://github.com/sstadick/hck#install>hck: install</a> for installation details.<h2 id=field-separators><a class=header href=#field-separators>Field separators</a></h2><p>By default, the input field separator option <code>-d</code> uses the regex <code>\s+</code> to split the data. The default value for the output field separator <code>-D</code> is the tab character.<pre><code class=language-bash>$ printf 'apple ball\t \r\v\fcat   dog' | hck -f2,4
ball    dog

# output field order is same as the order specified by -f
$ printf 'apple ball\t \r\v\fcat   dog' | hck -f3,1
cat     apple
</code></pre><p>If there are leading and trailing whitespaces, they'll result in empty fields. All the fields are printed if there is no particular selection specified.<pre><code class=language-bash>$ printf '    fig   toy   net   ' | hck -D, -f2,1,3
fig,,toy

$ printf '    fig   toy   net   ' | hck -D,
,fig,toy,net,
</code></pre><p>Here's some examples of using custom field separators.<pre><code class=language-bash>$ echo 'load;err_msg--\ant,r2..not' | hck -d'\W+' -D,
load,err_msg,ant,r2,not

$ echo 'Sample123string42with777numbers' | hck -d'\d+' -f1,4 -D,
Sample,numbers

$ echo 'apple:-:ball:-:cat' | hck -d:-: -f1,3 -D' : '
apple : cat
</code></pre><p>A particular field can only be displayed once in the output.<pre><code class=language-bash>$ echo 'a,b,c,d,e' | hck -d, -f3,3,1,2,3,2,1 -D,
c,a,b
</code></pre><h2 id=literal-field-separator><a class=header href=#literal-field-separator>Literal field separator</a></h2><p>Add <code>-L</code> option to treat the argument passed to the <code>-d</code> option as a fixed string instead of regex. As per the documentation, this can also result in significant speed up.<pre><code class=language-bash># same as: hck -d'\\' -f1
$ echo 'apple\ball' | hck -Ld'\' -f1
apple

$ echo '123)(%)*#^&(*@#.[](\\){1}\xyz' | hck -Ld')(%)*#^&(*@#.[](\\){1}\' -f2
xyz
</code></pre><h2 id=field-ranges><a class=header href=#field-ranges>Field ranges</a></h2><p>Range of fields can be specified separated by a <code>-</code> character. You'll get an error if the range is in descending order.<pre><code class=language-bash>$ printf '1 2 3 4 5\na b c d e\n' | hck -f1-3 -D,
1,2,3
a,b,c

# multiple ranges can be specified
# as mentioned before, a particular field can only be printed once
$ printf '1 2 3 4 5\na b c d e\n' | hck -f2-4,1,3-5 -D,
2,3,4,1,5
b,c,d,a,e
</code></pre><p>Beginning or ending field for a range can be ignored. They'll default to first and last fields respectively.<pre><code class=language-bash># up to first four fields
$ printf 'apple ball cat\na b c d e\n' | hck -f-4 -D,
apple,ball,cat
a,b,c,d

# all fields from the second field
$ printf 'apple ball cat\na b c d e\n' | hck -f2- -D,
ball,cat
b,c,d,e

$ printf 'apple ball cat\na b c d e\n' | hck -D,
apple,ball,cat
a,b,c,d,e
</code></pre><h2 id=header-based-field-selection><a class=header href=#header-based-field-selection>Header based field selection</a></h2><p>You can pass a literal header name to the <code>-F</code> option to select a column based on its name.<pre><code class=language-bash>$ cat scores.csv
Name,Maths,Physics,Chemistry
Ith,100,100,100
Cy,97,98,95
Lin,78,83,80

# you can also use: hck -d, -FMaths scores.csv
$ hck -d, -F 'Maths' scores.csv
Maths
100
97
78

# order of -F usage determines the output order as well
$ hck -d, -D: -F 'Chemistry' -F 'Maths' scores.csv
Chemistry:Maths
100:100
95:97
80:78
</code></pre><p>You can add the <code>-r</code> option to select headers based on regex.<pre><code class=language-bash>$ hck -d, -D: -rF '^[NP]' scores.csv
Name:Physics
Ith:100
Cy:98
Lin:83
</code></pre><p>If a given header selection doesn't match, you'll get an error.<pre><code class=language-bash>$ hck -d, -F 'English' scores.csv
[2021-07-16T08:33:40Z ERROR hck] No headers matched

$ hck -d, -D: -rF '^[NP]z' -F 'at' scores.csv
[2021-07-16T08:32:38Z ERROR hck] Header not found: ^[NP]z
</code></pre><p>You can use both <code>-f</code> and <code>-F</code> options if you wish. As mentioned before, a particular field can only be printed once in the output.<pre><code class=language-bash>$ hck -d, -F 'Name' -f3- -D: scores.csv
Name:Physics:Chemistry
Ith:100:100
Cy:98:95
Lin:83:80
</code></pre><h2 id=exclude-fields><a class=header href=#exclude-fields>Exclude fields</a></h2><p>The <code>-e</code> and <code>-E</code> options can be used to exclude fields based on field number and header names respectively. You can continue to use <code>-f</code>, <code>-F</code>, <code>-L</code> and <code>-r</code> options as needed.<pre><code class=language-bash># except second field
$ printf 'apple ball cat\n1 2 3 4 5' | hck -e2 -D:
apple:cat
1:3:4:5

# except first and third fields
$ printf 'apple ball cat\n1 2 3 4 5' | hck -e1,3 -D:
ball
2:4:5

# except first and third fields, but only among the fields specified by -f
$ printf 'apple ball cat\n1 2 3 4 5' | hck -e1,3 -D: -f2-4
ball
2:4

# except fields ending with 's' character
$ hck -d, -rE 's$' -D: scores.csv
Name:Chemistry
Ith:100
Cy:95
Lin:80
</code></pre><h2 id=mixing--f-and--f-selections><a class=header href=#mixing--f-and--f-selections>Mixing -f and -F selections</a></h2><p>You can use a mix of both <code>-f</code> and <code>-F</code> options for field selections. The <code>-f</code> option can be used only once and <code>-F</code> can be used multiple times. The field with the lower value between the <code>-f</code> and <code>-F</code> options will be displayed first in the output. Here's some examples to understand this priority better:<pre><code class=language-bash># -f2 comes before Chemistry (4th field)
$ hck -d, -D, -f2 -F 'Chemistry' scores.csv
Maths,Chemistry
100,100
97,95
78,80

# Name (1st field) comes before -f3
$ hck -d, -D, -f3 -F 'Name' scores.csv
Name,Physics
Ith,100
Cy,98
Lin,83

# Name (1st field) comes before -f3
# Chemistry (4th field) comes after -f3
$ hck -d, -D, -f3 -F 'Name' -F 'Chemistry' scores.csv
Name,Physics,Chemistry
Ith,100,100
Cy,98,95
Lin,83,80
</code></pre><p><code>-f</code> can have multiple fields, but only the first field passed to <code>-f</code> is considered for the comparison. Similarly, if there are multiple <code>-F</code> options, only the first <code>-F</code> will be considered.<pre><code class=language-bash># Maths (2nd field) comes before -f3
$ hck -d, -D, -f3,1 -F 'Maths' scores.csv
Maths,Physics,Name
100,100,Ith
97,98,Cy
78,83,Lin
</code></pre><h2 id=processing-compressed-input><a class=header href=#processing-compressed-input>Processing compressed input</a></h2><p>You can use the <code>-z</code> option to work with compressed input files. This works based on the filename extension.<pre><code class=language-bash>$ xz scores.csv

$ hck -d, -f2 -z scores.csv.xz
Maths
100
97
78
</code></pre><p>The <code>-z</code> option is especially useful if you have multiple input files, and they can even be compressed differently. See <a href=https://github.com/sstadick/hck#decompression>hck: Decompression</a> section for complete list of extensions supported and the command that is used to decompress.<h2 id=specifying-output-file><a class=header href=#specifying-output-file>Specifying output file</a></h2><p>You can use the <code>-o</code> option to specify a file for the output instead of <code>stdout</code>. Don't use the same name as input, since it will result in empty output file.<pre><code class=language-bash>$ hck -d, -f2 scores.csv -o op.txt
$ cat op.txt 
Maths
100
97
78
</code></pre><p>The <code>-o</code> option would become more useful when saving compressed output based on filename extension gets implemented.<h2 id=dos-style-line-endings><a class=header href=#dos-style-line-endings>DOS style line endings</a></h2><p>If you have <code>\r\n</code> as line endings, you can use the <code>--crlf</code> option. The output will also be DOS style.<pre><code class=language-bash># since \n is the default line separator,
# last field retains the \r character
$ printf 'a,b,c\r\n1,2,3\r\n' | hck -d, -f3,2,1 -D, | cat -v
c^M,b,a
3^M,2,1

# with --crlf the last field no longer has \r
# output line ending will be \r\n
$ printf 'a,b,c\r\n1,2,3\r\n' | hck --crlf -d, -f3,2,1 -D, | cat -v
c,b,a^M
3,2,1^M
</code></pre></main><nav class=nav-wrapper aria-label="Page navigation"><a rel=prev href=rust-regex.html class="mobile-nav-chapters previous"title="Previous chapter"aria-label="Previous chapter"aria-keyshortcuts=Left> <i class="fa fa-angle-left"></i> </a><a rel=next href=sd.html class="mobile-nav-chapters next"title="Next chapter"aria-label="Next chapter"aria-keyshortcuts=Right> <i class="fa fa-angle-right"></i> </a><div style="clear: both"></div></nav></div></div><nav class=nav-wide-wrapper aria-label="Page navigation"><a rel=prev href=rust-regex.html class="nav-chapters previous"title="Previous chapter"aria-label="Previous chapter"aria-keyshortcuts=Left> <i class="fa fa-angle-left"></i> </a><a rel=next href=sd.html class="nav-chapters next"title="Next chapter"aria-label="Next chapter"aria-keyshortcuts=Right> <i class="fa fa-angle-right"></i> </a></nav></div><script>
            window.playground_copyable = true;
        </script><script src=elasticlunr.min.js charset=utf-8></script><script src=mark.min.js charset=utf-8></script><script src=searcher.js charset=utf-8></script><script src=clipboard.min.js charset=utf-8></script><script src=highlight.js charset=utf-8></script><script src=book.js charset=utf-8></script><script src=sidebar.js></script>